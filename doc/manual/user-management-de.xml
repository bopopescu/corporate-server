<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE chapter [
	<!ENTITY % extensions SYSTEM "../stylesheets/macros.ent" >
	<!ENTITY % DocBookDTD PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
	<!ENTITY % entities SYSTEM "../stylesheets/macros-de.ent" >
	%extensions;
	%DocBookDTD;
	%entities;
]>
<chapter id="users:general">
    <title>Benutzerverwaltung</title>
    <para>
        UCS integriert ein zentrales Identity-Management. Alle Benutzerinformationen
        werden in UCS zentral über &ucsUMC; verwaltet und im LDAP-Verzeichnisdienst
        gespeichert.
    </para>
    <para>
        Alle in die Domäne integrierten Dienste greifen dabei auf die
        zentralen Konto-Informationen zu, d.h. für die Benutzeranmeldung an
        einem Windows-Client wird die gleiche Benutzerkennung und das gleiche
        Passwort verwendet wie etwa bei der Anmeldung am IMAP-Server.
    </para>
    <para>
        Die domänenweite Verwaltung von Benutzerdaten verringert den
        administrativen Aufwand, da Änderungen nicht auf verschiedenen
        Einzelsystemen nachkonfiguriert werden müssen. Darüber hinaus vermeidet
		dies Folgefehler, die sich durch Inkonsistenzen zwischen den einzelnen
		Datenbeständen ergeben können.
    </para>
    <para>
        In UCS gibt es drei unterschiedliche Arten von Benutzern:
        <orderedlist>
             <listitem><simpara>
                  <emphasis>Vollwertige Benutzerkonten</emphasis>:
                  Normale, vollwertige Benutzerkonten haben sämtliche verfügbaren Eigenschaften.
                  Diese Benutzer können sich an UCS- oder Windows-Systemen anmelden und je nach
                  Konfiguration auch an den installierten Apps. Die Benutzer können über das
                  UMC-Modul <guimenu>Benutzer</guimenu> (siehe <xref linkend="users::management"/>)
                  administriert werden.
             </simpara></listitem>

             <listitem><simpara>
                  <emphasis>Adressbucheinträge</emphasis>:
                  Adressbucheinträge können für die Pflege von internen oder externen
                  Kontaktinformationen verwendet werden. Diese Kontakte können sich nicht an UCS- oder
                  Windows-Systemen anmelden. Adressbucheinträge können über das UMC-Modul
                  <guimenu>Kontakte</guimenu> verwaltet werden.
             </simpara></listitem>

             <listitem><simpara>
                  <emphasis>Einfaches Authentisierungskonto</emphasis>:
                  Mit einem einfachen Authentisierungskonto wird ein Benutzer-Objekt angelegt, welches
                  ausschließlich einen Benutzernamen und ein Passwort hat. Mit diesem Konto ist
                  ausschließlich eine Authentisierung gegen den LDAP-Verzeichnisdienst möglich, aber
                  keine Anmeldung an UCS- oder Windows-Systemen. Einfache Authentisierungskonten
                  können über das UMC-Modul <guimenu>LDAP-Verzeichnis</guimenu>
                  (siehe <xref linkend="central:navigation"/>) erstellt werden.
             </simpara></listitem>
        </orderedlist>
    </para>
    <section id="users::management">
        <title>Verwaltung von Benutzern mit Univention Management Console</title>
        <para>
			Benutzer werden im UMC-Modul <emphasis>Benutzer</emphasis> verwaltet
			(siehe auch <xref linkend="central:user-interface"/>).
        </para>
		<figure id="user-create">
			<title>Anlegen eines Benutzers in UMC</title>
			<graphic scalefit="1" width="65%" align="center" fileref="illustrations44/users_user_de.png"/>
		</figure>
		<para>
			Über <guimenu>Weiter</guimenu> in <xref linkend="user-create"/> gelangt man auf die zweite Seite <xref linkend="user-password"/>, auf der dann das initiale Passwort gesetzt werden kann.
		</para>
		<figure id="user-password">
			<title>Passwortvergabe für einen neuen Benutzer</title>
			<graphic scalefit="1" width="65%" align="center" fileref="illustrations44/users_password_de.png"/>
		</figure>
		<para>
			Alternativ besteht bei installierter <foreignphrase>Self Service-App</foreignphrase> die Möglichkeit, das Setzen des Passworts dem Benutzer selbst zu überlassen.
			Dafür ist dann eine externe E-Mail-Adresse anzugeben, die als Kontakt-E-Mail-Adresse registriert wird.
			An diese erhält dann der Benutzer eine E-Mail mit einer Web-Adresse und einem <foreignphrase>Token</foreignphrase>, mit dem er sein Passwort setzen und seinen Zugang freischalten kann.
			Siehe dazu auch <xref linkend="user-management:password-changes-by-users:self-service"/>.
		</para>
		<figure id="user-password-new">
			<title>Initiales Benutzerpasswort</title>
			<graphic scalefit="1" width="90%" align="center" fileref="illustrations44/users_self-service_de.png"/>
		</figure>
        <para>
          In der Grundeinstellung wird zum Anlegen eines Benutzers ein vereinfachter Assistent
          angezeigt, der nur die wichtigsten Einstellungen abfragt. Durch einen Klick auf
		  <guimenu>Erweitert</guimenu> in <xref linkend="user-create"/> werden alle Attribute angezeigt. Der vereinfachte Assistent
          kann deaktiviert werden, indem die &ucsUCRV;
          <envar>directory/manager/web/modules/users/user/wizard/disabled</envar> auf
          <literal>true</literal> gesetzt wird.
        </para>
		<figure id="user-create-advanced">
			<title>Erweiterte Benutzeransicht</title>
			<graphic scalefit="1" width="90%" align="center" fileref="illustrations44/users_user_advanced_de.png"/>
		</figure>
        <table>
            <title>Karteikarte 'Allgemein'</title>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="2*"/>
                <thead>
                    <row>
                        <entry>Attribut</entry>
                        <entry>Beschreibung</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>Benutzername</entry>
                        <entry>
                            <para>
                                Mit diesem Namen meldet sich der Benutzer am System an. Der Name muss
                                mit einem Buchstaben beginnen und darf anschließend Buchstaben von a bis
                                z, die Ziffern 0 bis 9, Punkte, Bindestriche oder Unterstriche
								enthalten. Benutzernamen dürfen keine Leerzeichen enthalten.
                            </para>
                            <para>
                                Um die Kompatibilität mit Nicht-UCS-Systemen zu gewährleisten, wird
                                das Anlegen von Benutzern, die sich lediglich in der Groß- und Kleinschreibung
                                unterscheiden, verhindert. Wenn beispielsweise der Benutzername <wordasword>meier</wordasword>
                                bereits existiert, wird der Benutzername <wordasword>Meier</wordasword> nicht mehr zugelassen.
                            </para>
                            <para>
							  In der Grundeinstellung kann kein Benutzer mit dem Namen einer existierenden
							  Gruppe angelegt werden. Wird die &ucsUCRV; <envar>directory/manager/user_group/uniqueness</envar>
							  auf <literal>false</literal> gesetzt, wird diese Prüfung aufgehoben.
							</para>
                        </entry>
                    </row>
                    <row>
                        <entry>Beschreibung</entry>
                        <entry>
                            Hier kann eine beliebige Beschreibung für den Benutzer eingetragen werden.
                        </entry>
                    </row>
                    <row>
                        <entry>Passwort</entry>
                        <entry>
                            Hier wird das Passwort des Benutzers eingegeben.
                        </entry>
                    </row>
                    <row>
                        <entry>Passwort (Wiederholung)</entry>
                        <entry>
                            Um Tippfehler auszuschließen wird das Passwort des Benutzers erneut
                            eingegeben.
                        </entry>
                    </row>
                    <row>
                        <entry>Passwort-History ignorieren</entry>
                        <entry>
                            Durch die Aktivierung dieses Auswahlkästchens wird die Passwort-History für diesen
                            Benutzer und für diese Passwortänderung außer Kraft gesetzt. Dadurch kann dem
                            Benutzer mit dieser Änderung ein bereits verwendetes Passwort
                            zugewiesen werden. Weitere Hinweise zur Passwortverwaltung finden sich in
                            <xref linkend="users:passwords"/>.
                        </entry>
                    </row>
                    <row>
                        <entry>Passwort-Prüfungen ignorieren</entry>
                        <entry>
                            Wird diese Option aktiviert, wird die Prüfung der Passwortlänge und -qualität
                            für diesen Benutzer und für diese Passwortänderung außer Kraft
                            gesetzt. Dadurch kann dem Benutzer mit dieser Änderung z.B. ein
                            kürzeres Passwort zugewiesen werden, als in der Mindestlänge vorgegeben
                            ist. Weitere Hinweise zur Passwortverwaltung finden sich in
                            <xref linkend="users:passwords"/>.
                        </entry>
                    </row>
                    <row>
                        <entry>Primäre E-Mail-Adresse</entry>
                        <entry>
                            Hier wird die E-Mail-Adresse des Benutzers eingetragen, siehe
                            <xref linkend="mail::management::users"/>.
                        </entry>
                    </row>
                    <row>
                        <entry>Anrede</entry>
                        <entry>
                            Die Anrede des Benutzers kann hier eingegeben werden.
                        </entry>
                    </row>
                    <row>
                        <entry>Vorname</entry>
                        <entry>
                            Hier wird der Vorname des Benutzers eingetragen.
                        </entry>
                    </row>
                    <row>
                        <entry>Nachname</entry>
                        <entry>
                            Hier wird der Nachname des Benutzers angegeben.
                        </entry>
                    </row>
                    <row>
                        <entry>Anzeigename</entry>
                        <entry>
                            Der Anzeigename wird automatisch aus Vor- und Nachname gebildet. In der Regel
                            muss er nicht angepasst werden. Der Anzeigename wird u.a. in der
                            Synchronisation mit Active Directory und Samba 4 verwendet.
                        </entry>
                    </row>
                    <row>
                        <entry>Organisation</entry>
                        <entry>
                            Die Organisation/das Unternehmen, dem der Benutzer angehört, wird in diesem Feld eingetragen.
                        </entry>
                    </row>
                    <row>
                        <entry>Geburtsdatum</entry>
                        <entry>
                            In diesem Feld kann das Geburtsdatum des Benutzers gespeichert werden.
                        </entry>
                    </row>
                    <row>
                        <entry>Bild des Benutzers (JPEG-Format)</entry>
                        <entry>
                            Über diese Maske kann ein Bild des Benutzers im JPEG-Format im LDAP hinterlegt
                            werden. Standardmäßig ist die Dateigröße auf 512 Kilobyte limitiert.
                        </entry>
                    </row>
                    <row>
                        <entry>Mitarbeiternummer</entry>
                        <entry>
                            Die Mitarbeiter- oder Personalnummer kann in dieses Feld eingetragen werden.
                        </entry>
                    </row>
                    <row>
                        <entry>Mitarbeiterkategorie</entry>
                        <entry>
                            Hier kann die Kategorie des Mitarbeiters festgelegt werden.
                        </entry>
                    </row>
                    <row>
                        <entry>Vorgesetzter</entry>
                        <entry>
                            Der Vorgesetzte des Benutzers kann hier ausgewählt werden.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Karteikarte 'Gruppen'</title>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="2*"/>
                <thead>
                    <row>
                        <entry>Attribut</entry>
                        <entry>Beschreibung</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>Primäre Gruppe</entry>
                        <entry>
                            In dieser Auswahlliste kann die primäre Gruppe für den Benutzer festgelegt
                            werden. Zur Auswahl stehen alle in der Domäne eingetragenen Gruppen.
                            Standardmäßig ist die Gruppe <systemitem class="groupname">Domain Users</systemitem> als Vorgabe eingestellt.
                        </entry>
                    </row>
                    <row>
                        <entry>Gruppen</entry>
                        <entry>
                            Hier können weitere Gruppenzugehörigkeiten des Benutzers neben der
                            primären Gruppe eingestellt werden.
                        </entry>
                    </row>
				</tbody>
			</tgroup>
		</table>

        <table>
            <title>Karteikarte 'Konto'</title>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="2*"/>
                <thead>
                    <row>
                        <entry>Attribut</entry>
                        <entry>Beschreibung</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry>Konto ist deaktiviert</entry>
                        <entry>
                            <para>
                                Mir dem Auswahlkästchen <guimenu>Konto is deaktiviert</guimenu> kann das Benutzerkonto
                                deaktiviert werden.
				Wenn es aktiviert ist, kann sich der Benutzer nicht am System anmelden.
				Das betrifft alle Methoden für die Authentifikation.
				Ein typischer Anwendungsfall ist ein Benutzer, der das Unternehmen
                                verlassen hat. Eine Kontodeaktivierung kann in einer heterogenen Umgebung ggf. auch durch
                                externe Tools ausgelöst werden.
                            </para>
                        </entry>
                    </row>
                    <row>
                        <entry>Konto-Ablaufdatum</entry>
                        <entry>
                            <para>
                                In diesem Eingabefeld wird ein Datum vorgegeben, an dem das Konto
                                automatisch gesperrt wird. Dies ist sinnvoll für zeitlich befristete
                                Benutzerkonten, z.B. für Praktikanten.
                            </para>
                            <para>
                                Wenn das Datum entfernt oder ein anderes, zukünftiges Datum
                                eingetragen wird, kann sich der Benutzer wieder anmelden.
                            </para>
                        </entry>
                    </row>
                    <row>
                        <entry>Passwort bei der nächsten Anmeldung ändern</entry>
                        <entry>
                            Wenn dieses Auswahlkästchen aktiviert ist, muss der Benutzer bei der nächsten
                            Anmeldung an der Domäne sein Passwort ändern.
                        </entry>
                    </row>
                    <row>
                        <entry>Passwort-Ablaufdatum</entry>
                        <entry>
                            <para>
                                Wenn das Passwort zu einem bestimmten Datum abläuft, wird dieses Datum in
                                diesem Eingabefeld angezeigt. Das Eingabefeld ist nicht direkt
                                änderbar, siehe <xref linkend="users:passwords"/>.
                            </para>
                            <para>
                                Ist ein Passwort-Ablaufintervall definiert, wird das
                                Passwort-Ablaufdatum bei Kennwortänderungen automatisch angepasst.
                            </para>
                            <para>
                                Wird kein <guimenu>Passwort-Ablaufdatum</guimenu> gesetzt, werden evtl.
								bestehende frühere Ablaufdaten entfernt.
                            </para>
                        </entry>
                    </row>
                    <row>
                        <entry>Aussperrung zurücksetzen</entry>
                        <entry>
                            <para>
				Wenn das Benutzerkonto aus Sicherheitsgründen automatisch gesperrt worden ist,
				meist weil ein Benutzer sein Passwort zu oft fehlerhaft eingegeben hat,
				kann dieses Auswahlkästchen dazu verwendet werden, um das Konto manuell schon
				vor Ablauf der Sperrzeit zu entsperren.
				Eine temporäre Aussperrung kann auftreten, wenn ein Administrator eine entsprechende
				domänenweite Einstellung definiert wurde.
				Es gibt drei unterschiedliche Mechanismen, die eine Aussperrung auslösen können,
				falls die entsprechend konfiguriert wurden:
                                <itemizedlist>
                                    <listitem>
                                        <simpara>
                                            Fehlgeschlagene Authentifikation per PAM an einem UCS-Server (siehe <xref linkend="users:faillog"/>).
                                        </simpara>
                                        <simpara>
                                            Fehlgeschlagene Authentifikation per LDAP (falls das Overlay-Modul <filename>ppolicy</filename> aktiviert und konfiguriert wurde).
                                        </simpara>
                                        <simpara>
                                            Fehlgeschlagene Authentifikation per Samba/AD (falls die Samba domain <property>passwordsettings</property> konfiguriert wurden).
                                        </simpara>
                                    </listitem>
                                </itemizedlist>
                            </para>
                        </entry>
                    </row>
                    <row>
                        <entry>Aussperrung endet</entry>
                        <entry>
                            <para>
				Wenn das Benutzerkonto aus Sicherheitsgründen automatisch gesperrt worden ist,
				meist weil ein Benutzer sein Passwort zu oft fehlerhaft eingegeben hat,
				zeigt dieses Feld den Zeitpunkt an, ab dem das Konto regulär automatisch
				entsperrt wird.
                            </para>
                        </entry>
                    </row>
                    <row>
                        <entry>Laufwerk für das Windows-Heimatverzeichnis</entry>
                        <entry>
                            Wenn das Windows-Heimatverzeichnis bei diesem Benutzer auf einem anderen
                            Windows-Laufwerk erscheinen soll, als in der Samba-Konfiguration vorgegeben,
                            so kann hier ein Laufwerksbuchstabe eingetragen werden, z.B. <filename class="partition">M:</filename>.
                        </entry>
                    </row>
                    <row>
                        <entry>Windows-Heimatverzeichnis</entry>
                        <entry>
                            Hier wird der Pfad zu dem Verzeichnis angegeben, das als
                            Windows-Heimatverzeichnis für den Benutzer dienen soll,
                            z.B. <filename class="directory">\\ucs-file-server\meier</filename>.
                        </entry>
                    </row>
                    <row>
                        <entry>Anmeldeskript</entry>
                        <entry>
                            Hier wird das benutzerspezifische Anmeldeskript relativ zur Netlogon-Freigabe
                            eingetragen, z.B. <filename>user.bat</filename>.
                        </entry>
                    </row>
                    <row>
                        <entry>Profilverzeichnis</entry>
                        <entry>
                            Das Profilverzeichnis für den Benutzer kann hier angegeben werden,
                            e.g. <filename class="directory">\\ucs-file-server\user\profile</filename>.
                        </entry>
                    </row>
                    <row>
                        <entry>Relative ID</entry>
                        <entry>
                            Die relative ID (RID) ist der lokale Teil der SID-Domänenkennung. Wenn ein Benutzer eine
                            bestimmte RID erhalten soll, so kann diese hier eingetragen werden. Wenn keine
                            RID eingetragen wird, so wird automatisch die nächste freie RID verwendet. Die
                            RID kann nachträglich nicht geändert werden, es sind ganze Zahlen ab
                            1000 zulässig. RIDs unter 1000 sind Standard-Gruppen und anderen speziellen
                            Objekten vorbehalten.
                        </entry>
                    </row>
                    <row>
                        <entry>Samba-Privilegien</entry>
                        <entry>
                            Mit dieser Auswahlmaske können einem Benutzer ausgewählte
                            Windows-Systemrechte zugewiesen werden, etwa die Berechtigung ein
                            System in die Domäne zu joinen.
                        </entry>
                    </row>
                    <row>
                        <entry>Erlaubte Zeiten für Windows-Anmeldungen</entry>
                        <entry>
                            <para>
                                In diesem Eingabefeld werden Zeitspannen festgelegt, zu denen sich dieser Benutzer
                                an Windows-Rechnern anmelden kann.
                            </para>
                            <para>
                                Wird keine Einstellung in diesem Feld vorgenommen, so kann sich der Benutzer zu jeder
                                Tageszeit anmelden.
                            </para>
                        </entry>
                    </row>
                    <row>
                        <entry>Anmeldung nur an diesen Microsoft Windows-Rechnern zulassen</entry>
                        <entry>
                            Diese Einstellung gibt an, an welchen Rechnern sich der Benutzer anmelden
                            darf. Werden keine Einstellungen vorgenommen, ist der Benutzer berechtigt,
                            sich an jedem Rechner anzumelden.
                        </entry>
                    </row>
                    <row>
                        <entry>UNIX-Heimatverzeichnis</entry>
                        <entry>
                            Der Verzeichnispfad zum Heimatverzeichnis des Benutzers.
                        </entry>
                    </row>
                    <row>
                        <entry>Login-Shell</entry>
                        <entry>
                            In diesem Feld wird die Login-Shell des Benutzers eingetragen. Dieses Programm
                            wird bei der textbasierten Anmeldung des Benutzers gestartet. Standardmäßig
                            wird hier <filename>/bin/bash</filename> eingetragen.
                        </entry>
                    </row>
                    <row>
                        <entry>Benutzer-ID</entry>
                        <entry>
                            <para>
                                Wenn der Benutzer eine bestimmte Benutzer-ID erhalten soll, so kann die
                                Benutzer-ID in dieses Feld eingetragen werden. Wird kein Wert
                                vorgegeben, wird automatisch eine freie Benutzer-ID zugewiesen.
                            </para>
                            <para>
                                Die Benutzer-ID kann nur beim Hinzufügen des Benutzers angegeben
                                werden, beim späteren Bearbeiten des Benutzers kann die Benutzer-ID nicht
                                geändert werden und wird ausgegraut dargestellt.
                            </para>
                        </entry>
                    </row>
                    <row>
                        <entry>Gruppen-ID der primären Gruppe</entry>
                        <entry>
                            Hier wird die Gruppen-ID der primären Gruppe des Benutzers
                            angezeigt. Die primäre Gruppe kann im Reiter <guimenu>Allgemein</guimenu>
                            geändert werden.
                        </entry>
                    </row>
                    <row>
                        <entry>Heimatverzeichnisfreigabe</entry>
                        <entry>
                            Wird hier eine Freigabe ausgewählt, wird das Heimatverzeichnis auf dem
                            angegebenen Server gespeichert. Erfolgt keine Auswahl, werden die
                            Benutzerdaten auf dem jeweiligen Anmeldesystem gespeichert.
                        </entry>
                    </row>
                    <row>
                        <entry>Pfad der Heimatverzeichnisfreigabe</entry>
                        <entry>
                            Hier wird der Pfad zum Heimatverzeichnis relativ zur
                            <guimenu>Heimatverzeichnisfreigabe</guimenu> angegeben. Beim Neuanlegen
							eines Benutzers ist der Benutzername als Vorgabewert bereits eingetragen.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Karteikarte 'Kontakt'</title>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="2*"/>
                <thead>
                    <row>
                        <entry>Attribut</entry>
                        <entry>Beschreibung</entry>
                    </row>
                </thead>
                <tbody>
                    <row>
                        <entry lang="">E-Mail-Adresse(n)</entry>
                        <entry>
                            Hier können weitere E-Mail-Adressen hinterlegt werden. Diese werden
                            nicht vom Mailserver ausgewertet. Die Werte werden im LDAP-Attribut
                            <property>mail</property> gespeichert. Die meisten Adressbuch-Applikationen suchen
                            im LDAP nach diesem Attribut.
                        </entry>
                    </row>
                    <row>
                        <entry>Telefonnummer(n)</entry>
                        <entry>
                            Dieses Feld beinhaltet die geschäftlichen Telefonnummern des Benutzers.
                        </entry>
                    </row>
                    <row>
                        <entry>Abteilungsnummer</entry>
                        <entry>
                            Hier kann die Abteilungsnummer des Mitarbeiters angegeben werden.
                        </entry>
                    </row>
                    <row>
                        <entry>Raumnummer</entry>
                        <entry>
                            Die Raumnummer des Benutzers.
                        </entry>
                    </row>
                    <row>
                        <entry>Straße</entry>
                        <entry>
                            Die Straße und die Hausnummer der Geschäftsadresse des Benutzers kann hier eingetragen werden.
                        </entry>
                    </row>
                    <row>
                        <entry>Postleitzahl</entry>
                        <entry>
                            Dieses Feld beinhaltet die Postleitzahl der Geschäftsadresse des Benutzers.
                        </entry>
                    </row>
                    <row>
                        <entry>Stadt</entry>
                        <entry>
                            Dieses Feld beinhaltet die Stadt der Geschäftsadresse des Benutzers.
                        </entry>
                    </row>
                    <row>
                        <entry>Telefonnummer(n) Mobil</entry>
                        <entry>
                            Hier werden die privaten Mobilfunknummern des Benutzers eingetragen.
                        </entry>
                    </row>
                    <row>
                        <entry>Telefonnummer(n) Festnetz</entry>
                        <entry>
                            Die privaten Festnetznummern können hier angegeben werden.
                        </entry>
                    </row>
                    <row>
                        <entry>Rufnummer(n) Pager</entry>
                        <entry>
                            Pager-Rufnummern werden in diesem Feld angegeben.
                        </entry>
                    </row>
                    <row>
                        <entry>Private Adresse</entry>
                        <entry>
                            Eine oder mehrere private Postadressen des Benutzers können in diesem Feld
                            angegeben werden.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Karteikarte 'Mail'</title>
            <tgroup cols="1">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <tbody>
                    <row>
                        <entry>
                            <para>
                                Diese Karteikarte wird in den erweiterten Einstellungen angezeigt.
                            </para>
                            <para>
                                Die Einstellungen sind in <xref linkend="mail::management::users"/>
                                beschrieben.
                            </para>
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
        <table>
            <title>Karteikarte '(Optionen)'</title>
            <tgroup cols="2">
                <colspec colnum="1" colname="col1" colwidth="1*"/>
                <colspec colnum="2" colname="col2" colwidth="2*"/>
                <thead>
                    <row>
                        <entry>Attribut</entry>
                        <entry>Beschreibung</entry>
                    </row>
                </thead>
                <tbody>

                    <row>
                        <entry>Public Key Infrastruktur-Konto</entry>
                        <entry>
                            Wenn dieses Auswahlkästchen nicht markiert ist, erhält der Benutzer die
                            Objektklasse <classname>pkiUser</classname> nicht.
                        </entry>
                    </row>
                </tbody>
            </tgroup>
        </table>
    </section>

    <section id="users:app-activation">
        <title>Benutzeraktivierung für Apps</title>
        <para>
            Viele Apps aus dem App Center sind mit dem zentralen Identity
            Management in UCS verknüpft. Dadurch können Systemadministratoren
            die Benutzer für Apps aktivieren. In manchen Fällen können noch
            weitere App spezifische Einstellungen für den Benutzer vorgenommen
            werden. Das ist abhängig von der App und wie diese das Identity
            Management nutzt.
        </para>
        <figure id="user-app-activation">
            <title>Benutzeraktivierung für installierte Apps</title>
            <graphic scalefit="1" width="100%" align="center" fileref="illustrations44/user_activation_de.png" />
        </figure>
        <para>
            Sobald eine App in der UCS-Umgebung installiert ist, die die
            Benutzeraktivierung verwendet, erscheint sie mit Logo im Reiter
            <guimenu>Apps</guimenu> des Benutzers im UMC Modul
            <emphasis>Benutzer</emphasis>. Mit einem Haken in der Checkbox wird
            der Benutzer für die App aktiviert. Wenn noch weitere Einstellungen
            für die Berechtigung gemacht werden können, erscheint ein
            zusätzlicher Reiter mit dem Namen der App, um diese Parameter zu
            setzen. Die App Aktivierung und die Parameter werden am
            Benutzerobjekt im LDAP-Verzeichnisdienst von UCS gespeichert.
        </para>
        <para>
            Um einem Benutzer die Berechtigung zur Nutzung einer App wieder zu
            entziehen, genügt es, den Haken aus Checkbox zu entfernen.
        </para>
        <para>
            Wenn die App deinstalliert wird, wird die Checkbox der
            Benutzeraktivierung für die App vom Reiter <guimenu>Apps</guimenu>
            des Benutzers im UMC Modul entfernt.
        </para>
    </section>

    <section id="users:passwords">
        <title>Management der Benutzerpasswörter</title>
        <para>
            Schwer zu erratende Passwörter und regelmäßige Passwortwechsel sind
            ein wichtiger Baustein der Systemsicherheit einer
            UCS-Domäne. Folgende Eigenschaften lassen sich für Benutzer über eine
            <emphasis>Passwort</emphasis>-Richtlinie
			konfigurieren. Wird Samba eingesetzt, greifen für
			Anmeldungen an Windows-Clients die Einstellungen des
			Samba-Domänenobjekts (siehe <xref
			linkend="users:password:samba"/>). Die Einstellungen des
			Samba-Domänenobjekts und der Richtlinie sollten identisch
			gesetzt werden, sonst greifen für Anmeldungen
			an Windows- und UCS-Systemen unterschiedliche
			Passwortanforderungen.
		</para>
        <para>
		  Für jeden im Managementsystem gespeicherten Benutzer wird das Passwort in verschiedenen
		  Attributen gespeichert:
		</para>
		  <itemizedlist>
			<listitem>
				<simpara>
					Das Attribut <property>krb5Key</property> speichert das
					Kerberos-Passwort
				</simpara>
			</listitem>
			<listitem>
				<simpara>
			Das Attribut <property>userPassword</property> speichert das
			Unix-Passwort (das in anderen Linux-Distributionen in <filename>/etc/shadow</filename>
			gespeichert wird
				</simpara>
			</listitem>
			<listitem>
				<simpara>
			Das Attribut <property>sambaNTPassword</property> enthält den von Samba
			verwendeten NT-Passwort-Hash
				</simpara>
			</listitem>
		  </itemizedlist>
		<para>
		  Passwortänderungen werden in der UCS-PAM-Konfiguration immer über Kerberos initiiert.
		</para>
            <figure id="password-policy">
                <title>Konfiguration einer Passwort-Richtlinie</title>
                <graphic scalefit="1" width="100%" fileref="illustrations44/users_policy_password_de.png"/>
            </figure>
            <itemizedlist>
                <listitem>
                    <para>
                        Die <emphasis>Passwort-Historie</emphasis> speichert die letzten
                        Passwortänderungen in Form von Hashes. Diese Passwörter können dann vom Benutzer bei einer
                        Änderung nicht als neues Kennwort verwendet werden. Mit einer
                        Passwort-Historie von z.B. fünf müssten fünf neue Passwörter verwendet
                        werden, bis ein Kennwort erneut verwendet werden kann.
						Wenn keine Speicherung der Passwort-Historie erfolgen soll, muss der Wert auf 0 gesetzt werden.
                    </para>
                    <para>
                        Die Passwörter werden nicht rückwirkend gespeichert. Wenn beispielsweise
                        ursprünglich zehn Passwörter gespeichert wurden und der Wert auf drei
                        herabgesetzt wird, werden die älteren sieben Passwörter bei der nächsten
                        Passwort-Änderung aus der Historie entfernt. Wird danach die
                        Historien-Länge wieder erhöht, müssen erst wieder Passwörter
                        'angesammelt' werden.
                    </para>
                </listitem>
                <listitem>
					<simpara>
                    Die <emphasis>Passwort-Länge</emphasis> ist die Anzahl an Zeichen,
                    die ein Nutzer-Passwort mindestens enthalten muss. Wird nichts
                    eintragen, beträgt die Mindestlänge acht Zeichen.
                    Der Vorgabewert von acht Zeichen für die Passwort-Länge ist
                    fest vorgegeben. Er gilt deswegen immer, wenn keine
                    Richtlinie gesetzt ist und das Auswahlkästchen <guimenu>Passwort-Länge
                    ignorieren</guimenu> nicht markiert ist, also auch, wenn die
                    Passwort-Richtlinie <emphasis>default-settings</emphasis> gelöscht wurde.
					Wenn keine Prüfung der Passwortlänge erfolgen soll, muss der Wert auf 0 gesetzt werden.
					</simpara>
                </listitem>
                <listitem>
					<simpara>
                    Ein <emphasis>Passwort-Ablaufintervall</emphasis> forciert regelmäßige
                    Passwortänderungen. Bei der Anmeldung an &ucsUMC;, Kerberos, Windows-Clients und
                    an UCS-Systemen wird nach Ablauf des Intervalls in Tagen ein
                    Passwortwechsel erzwungen. Die verbleibende Gültigkeit des Kennworts
                    wird in der Benutzerverwaltung unter <guimenu>Passwort-Ablaufdatum</guimenu>
                    im Reiter <guimenu>Konto</guimenu> angezeigt. Wird das Eingabefeld leer
					belassen, wird kein Passwort-Ablaufintervall angewendet.
					</simpara>
                </listitem>
                <listitem>
                    <para>
                        Ist die Option <emphasis>Passwort-Qualitätsprüfung</emphasis> aktiviert,
                        werden für Passwortänderungen in Samba, &ucsUMC; und Kerberos
                        zusätzliche Prüfungen vorgenommen, die auch eine Wörterbuchprüfung
                        beinhalten.
                    </para>
                    <para>
                        Die Konfiguration erfolgt über &ucsUCR; und sollte auf allen
                        Anmeldeservern erfolgen. Folgende Prüfungen können erzwungen werden:
                    </para>
                        <itemizedlist>
                            <listitem>
								<simpara>
                                Die Mindestanzahl von Zahlen in dem neuen Passwort
                                (<envar>password/quality/credit/digits</envar>).
								</simpara>
                            </listitem>
                            <listitem>
								<simpara>
                                Die Mindestanzahl von Grossbuchstaben in dem neuen Passwort
                                (<envar>password/quality/credit/upper</envar>).
								</simpara>
                            </listitem>
                            <listitem>
								<simpara>
                                Die Mindestanzahl von Kleinbuchstaben in dem neuen Passwort
                                (<envar>password/quality/credit/lower</envar>).
								</simpara>
                            </listitem>
                            <listitem>
								<simpara>
                                Die Mindestanzahl von Zeichen in dem neuen Passwort, die keine
                                Buchstaben oder Ziffern sind (<envar>password/quality/credit/other</envar>).
								</simpara>
                            </listitem>
                            <listitem>
								<simpara>
                                Einzelne Zeichen/Ziffern können ausgeschlossen werden
                                (<envar>password/quality/forbidden/chars</envar>).
								</simpara>
                            </listitem>
                            <listitem>
								<simpara>
                                Einzelne Zeichen/Ziffern können erzwungen werden
                                (<envar>password/quality/required/chars</envar>).
								</simpara>
                            </listitem>
                        </itemizedlist>
                </listitem>
            </itemizedlist>
    </section>

    <section id="users:password:samba">
	  <title>Passwort-Einstellungen für Windows-Clients bei Verwendung
	  von Samba</title>

	  <para>
	  Mit dem Samba-Domänenobjekt können die Passwortanforderungen bei
	  der Anmeldung an Windows-Clients in einer Samba-Domäne
	  festgelegt werden.
	  </para>

	  <para>
		Das Samba-Domänenobjekt wird über das UMC-Modul
		<emphasis>LDAP-Verzeichnis</emphasis> verwaltet. Es
		befindet sich im Container <uri>samba</uri>
		unterhalb der LDAP-Basis und trägt den NetBIOS-Namen der Domäne.
	  </para>

	  <para>
	  Die Einstellungen des Samba-Domänenobjekts und der Richtlinie
	  (siehe <xref linkend="users:passwords"/>) sollten identisch
	  gesetzt werden, sonst greifen für Anmeldungen für Anmeldungen an
	  Windows- und UCS-Systemen unterschiedliche Passwortanforderungen.
	  </para>

		<table>
		  <title>Reiter 'Allgemein'</title>
		  <tgroup cols="2">
			<colspec colnum="1" colname="col1" colwidth="1*"/>
			<colspec colnum="2" colname="col2" colwidth="2*"/>
			<thead>
			  <row>
				<entry>Attribut</entry>
				<entry>Beschreibung</entry>
			  </row>
			</thead>
			<tbody>

			  <row>
				<entry>Passwort-Länge</entry>
				<entry>
				  Die Anzahl an Zeichen, die ein Nutzer-Passwort mindestens enthalten muss.
				</entry>
			  </row>

			  <row>
				<entry>Passwort-History</entry>
				<entry>
				  Die letzten Passwortänderungen werden in Form von
				  Hashes gespeichert. Diese Passwörter können dann vom Benutzer bei einer
				  Änderung nicht als neues Kennwort verwendet
				  werden. Mit einer Passwort-History von z.B. fünf
				  müssten fünf neue Passwörter verwendet werden, bis
				  ein Kennwort erneut verwendet werden kann.
				</entry>
			  </row>

			  <row>
				<entry>Minimales Passwortalter</entry>
				<entry>
				  Der hier festgelegte Zeitraum muss min. seit der
				  letzten Passwortänderungen vergangen sein, bis ein
				  Benutzer sein Passwort das nächste Mal setzen kann.
				</entry>
			  </row>

			  <row>
				<entry>Maximales Passwortalter</entry>
				<entry>
				  Nach Ablauf des hier hinterlegten Zeitraums muss das
				  Passwort vom Benutzer bei der nächsten Anmeldung
				  geändert werden. Bleibt der Wert leer, ist das
				  Passwort unbegrenzt gültig.
				</entry>
			  </row>

			</tbody>
		  </tgroup>
		</table>

	</section>

    <section id="user-management:password-changes-by-users">
        <title>Benutzer Selbstverwaltung</title>
		<section id="user-management:Passwortwechsel_durch_Benutzer_ueber_die_UMC">
			<title>Passwortwechsel über &ucsUMC;</title>
			<para>
				In &ucsUMC; kann jeder Benutzer sein Passwort über das Modul
				<guimenu>Passwort ändern</guimenu> neu setzen. Dieses wird auch bei
				Auswahl des Eintrages <guimenu>Einstellungen &ar; Passwort ändern</guimenu>
				im oberen, rechten Benutzermenü aufgerufen.
				Damit das Passwort geändert werden kann, muss zunächst das aktuelle
				angegeben werden. Die Änderung wird dann direkt über den PAM-Stack
				(siehe <xref linkend="computers:Authentifizierung__PAM"/>) durchgeführt
				und ist danach zentral für alle Dienste verfügbar.
			</para>
		</section>
		<section id="user-management:password-changes-by-users:self-service">
			<title>Passwort-Verwaltung über <foreignphrase>Self Service-App</foreignphrase></title>
			<para>
				Durch die Installation der <wordasword>UCS-Komponente</wordasword> <guimenu>Self Service</guimenu>
				über das <guimenu>App Center</guimenu> werden Benutzer dazu befähigt,
				ihr Passwort ohne die Interaktion mit einem Administrator zu verwalten.
			</para>
			<para>
				Die <foreignphrase>Self Service-App</foreignphrase> registriert einen Web-Dienst in dem <wordasword>Portal</wordasword>,
				auf den über eine eigene Webseite zugegriffen werden kann:
				<guimenu>Passwort ändern</guimenu>.
				Sie erlaubt es Benutzern, unter Angabe ihres alten Passwortes ein neues Passwort
				zu setzen, oder aber ihr vergessenes Passwort zurückzusetzen. Für das Zurücksetzen
				des Passworts wird ein <foreignphrase>Token</foreignphrase> an eine vorher dafür registrierte
				Kontakt-E-Mail-Adresse gesendet, das dann auf der Webseite vom Benutzer einzugeben ist.
			</para>
			<para>
				Das Design der <foreignphrase>Self Service-App</foreignphrase> kann durch die Datei <filename>/usr/share/univention-self-service/www/css/custom.css</filename> angepasst werden.
				Diese Datei wird während eines Updates nicht überschrieben.
			</para>
		</section>
		<section id="user-management:password-changes-by-users:contact-data">
			<title>Benutzerprofilselbstverwaltung</title>
			<para>
				Am Benutzerkonto im LDAP Verzeichnisdienst können weitere personenbezogene Daten gespeichert werden.
				Dies beinhaltet u.a. ein Bild, private Adressen und weitere Kontaktinformationen.
				Standardmäßig können diese nur von Administratoren aktualisiert werden.
				Alternativ können aber auch ausgewählte Felder für den Benutzer selber freigeschaltet werden.
				Der kann diese Daten über die <foreignphrase>Self Service-App</foreignphrase> selber pflegen.
			</para>
			<figure id="user-self-service">
				<title>Profilverwaltung</title>
				<graphic scalefit="1" width="65%" align="center" fileref="illustrations44/users_self-service_profile_de.png"/>
			</figure>
			<para>
				Dafür müssen folgende &ucsUCRV;n konfiguriert werden:<footnote><simpara>Beide <foreignphrase>attributes</foreignphrase> Variablen müssen zueinander passen. Die Namen der Attribute und deren Zuordnung kann man über folgenden Aufruf erhalten: <command><![CDATA[python -c 'from univention.admin.handlers.users.user import mapping;print("\n".join(map("{0[0]:>30s} {0[1][0]:<30s}".format, sorted(mapping._map.items()))))']]></command></simpara></footnote>
			</para>
			<variablelist>
				<varlistentry>
					<term><envar>self-service/ldap_attributes</envar></term>
					<listitem><simpara>
						Über diese Variable werden die <emphasis>LDAP</emphasis> Attribute konfiguriert, die ein Benutzer selber an seinem Benutzerkonto modifizieren kann.
						Die Namen der Attribute sind durch Komma zu trennen.
						Diese Variable ist auf dem &ucsMaster; (und &ucsBackup;s) zu setzen.
					</simpara></listitem>
				</varlistentry>
				<varlistentry>
					<term><envar>self-service/udm_attributes</envar></term>
					<listitem><simpara>
						Über diese Variable werden die <emphasis>UDM</emphasis> Attribute konfiguriert, die ein Benutzer modifizieren kann.
						Die Namen der Attribute sind durch Komma zu trennen.
						Diese Variable ist auf dem Rechnern zu setzen, auf denen die <foreignphrase>Self Service-App</foreignphrase> installiert ist.
					</simpara></listitem>
				</varlistentry>
				<varlistentry>
					<term><envar>umc/self-service/profiledata/enabled</envar></term>
					<listitem><simpara>
						Diese Variable muss auf allen beteiligten Server-Systemen auf <literal>true</literal> gesetzt werden, um den Mechanismus zu aktivieren.
					</simpara></listitem>
				</varlistentry>
			</variablelist>
		</section>
    </section>
	<section id="users:faillog">
	    <title>Automatisches Sperren von Benutzern nach fehlgeschlagenen Anmeldungen</title>
	    <para>
	        Standardmäßig kann ein Benutzer sein Passwort beliebig oft falsch
	        eingeben. Um Brute Force-Angriffe auf Passwörter zu erschweren, kann eine
	        automatische Sperre von einem Benutzerkonto nach einer konfigurierbaren Anzahl von
	        fehlerhaften Anmeldungen aktiviert werden.
		</para>
	    <para>
			UCS vereinheitlicht verschiedene Methoden zur Authentifizierung und Autorisierung von Benutzern.
			Abhängig von den installierten Softwarekomponenten kann es verschiedene Mechanismen geben, wie
			fehlgeschlagene Anmeldeversuche konfiguriert und gezählt werden.
	    </para>
	    <para>
			Im folgenden werden die drei unterschiedlichen Methoden beschrieben.
	    </para>
		<section id="users:faillog-samba">
			<title>Samba Active Directory Dienste</title>
			<para>
				In Samba Active Directory Umgebungen werden diverse Dienste von Samba bereitgestellt, wie
				bspw. Kerberos. Um Benutzer nach fehlgeschlagenen Anmeldungen zu sperren, kann das Tool
				<command>samba-tool</command> verwendet werden.
			</para>
			<para>
				<itemizedlist>
					<listitem>
						<simpara>
							<command>samba-tool domain passwordsettings show</command> zeigt die aktuell eingestellten
							Werte.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<command>samba-tool domain passwordsettings set --account-lockout-threshold=5</command>
							legt fest, wie oft ein Benutzer versuchen kann, sich mit einem falschen Passwort
							anzumelden, bevor das Konto gesperrt wird.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<command>samba-tool domain passwordsettings set --account-lockout-duration=3</command>
							legt die Anzahl der Minuten fest, die ein Konto gesperrt wird, nachdem zu viele falsche
							Passwörter eingegeben wurden.
						</simpara>
					</listitem>
					<listitem>
						<simpara>
							<command>samba-tool domain passwordsettings set --reset-account-lockout-after=5</command>
							legt die Anzahl der Minuten fest, nach der der Zähler zurückgesetzt wird. Wenn ein Konto automatisch
							nach der konfigurierten Aussperrungsdauer entsperrt wird, dann wird der Zähler nicht direkt mit
							zurückgesetzt, um das Konto noch eine gewisse Zeit unter strikter Beobachtung zu halten.
							In dem Zeitfenster nach dem Ende der Aussperrung und vor der endgültigen Rücksetzung des Zählers
							führt ein einziger erneuter Login-Versuch mit einem falschen Passwort direkt wieder zu einer
							Sperrung des Kontos.
						</simpara>
					</listitem>
				</itemizedlist>
			</para>
			<para>
				Die manuelle Entsperrung eines Benutzers erfolgt in der Benutzerverwaltung auf dem Reiter <guimenu>Konto</guimenu>
				über die Aktivierung der Checkbox <guimenu>Aussperrung zurücksetzen</guimenu>.
			</para>
		</section>
		<section id="users:faillog-pam">
			<title>PAM-Stack</title>
			<para>
				Das automatische Sperren von Benutzern nach fehlgeschlagenen Anmeldungen im PAM-Stack kann
				durch Setzen der &ucsUCRV; <envar>auth/faillog</envar> auf <literal>yes</literal> aktiviert werden.
				Die Obergrenze an fehlerhaften Passworteingaben, bei der eine Kontosperre
				aktiviert wird, wird in der &ucsUCRV; <envar>auth/faillog/limit</envar> konfiguriert.
				Unterhalb des Limits wird nach einer korrekten Passworteingabe der Zähler jedesmal wieder zurückgesetzt.
			</para>
			<para>
				Die Sperre im PAM-Stack ist standardmäßig nur auf ein lokales System begrenzt. Wenn ein
				Benutzer also auf einem System zu oft sein Passwort falsch eingegeben hat, kann er sich auf
				einem anderen System weiterhin anmelden. Durch Setzen der &ucsUCRV; <envar>auth/faillog/lock_global</envar>
				kann die Sperre auch global erfolgen und wird im LDAP registriert. Die globale Sperrung kann nur auf
				&ucsMaster;/Backup-Systemen eingesetzt werden, da andere Systemrollen nicht über die nötigen
				Berechtigungen im LDAP-Verzeichnis verfügen.
				Auf allen Servern der genannten Systemrollen wird die Aussperrung aber automatisch auch lokal umgesetzt
				bzw. über das verwendete Listener-Modul auch wieder zurückgenommen, abhängig vom aktuellen Aussperrungs-Zustands
				des Kontos im LDAP-Verzeichnis.
			</para>
			<para>
				Standardmäßig ist die Sperre über den PAM-Stack unbegrenzt gültig,
				sie kann aber auch nach Ablauf eines Intervalls
				automatisch wieder aufgehoben werden. Hierzu ist in
				der &ucsUCRV; <envar>auth/faillog/unlock_time</envar> ein Zeitraum in Sekunden
				anzugeben. Wird der Wert auf 0 gesetzt, wird die Sperre direkt
				wiederaufgehoben.
			</para>
			<para>
				Der <systemitem class="username">root</systemitem>-Benutzer ist standardmäßig von der Passwort-Sperre
				ausgenommen, kann aber durch Setzen der &ucsUCRV; <envar>auth/faillog/root</envar> auf <literal>yes</literal>
				ebenfalls aufgenommen werden.
			</para>
			<para>
				Werden Konten nur lokal gesperrt, kann der Administrator ein Benutzerkonto durch
				Eingabe des Befehls <command>faillog -r -u USERNAME</command> entsperren. Erfolgt die
				Sperrung global im LDAP, kann der Benutzer in Univention Management Console im
				Reiter <guimenu>Konto</guimenu> in den Benutzer-Optionen <guimenu>Aussperrung zurücksetzen</guimenu>
				zurückgesetzt werden.
			</para>
		</section>
		<section id="users:faillog-openldap">
			<title>OpenLDAP</title>
			<para>
				Bei Domänencontrollern kann die automatische Kontosperre für den Fall eines wiederholten
				LDAP-Authentifizierungsfehlers aktiviert werden. Voraussetzung ist, dass das MDB LDAP-Backend
				verwendet wird. Dies ist seit UCS 4 das Standard Backend, vorherige Systeme müssen
				auf das MDB LDAP-Backend migriert werden, siehe <biblioref linkend="ucs-performance-guide"/>.
			</para>
			<para>
				Die Aktivierung der automatischen Kontosperrung muss pro Domänencontroller aktiviert werden.
				Dazu müssen die &ucsUCRV;n <envar>ldap/ppolicy</envar> und <envar>ldap/ppolicy/enabled</envar>
				auf <envar>yes</envar> gesetzt werden und der OpenLDAP Server muss neu gestartet werden:
				<programlisting language="sh">
ucr set ldap/ppolicy=yes ldap/ppolicy/enabled=yes
/etc/init.d/slapd restart
				</programlisting>
			</para>
			<para>
				Die Standardrichtlinie ist so ausgelegt, dass fünf wiederholte LDAP-Authentifizierungsfehler innerhalb eines
				Überwachungsintervalls von fünf Minuten dazu führen, dass das authentifizierende Konto in UMC gesperrt wird. Ein
				gesperrtes Konto kann nur von einem Domain-Administrator über &ucsUMC; freigeschaltet werden.
			</para>
			<para>
				Die Anzahl der wiederholten LDAP-Authentifizierungsfehler kann in dem Konfigurationsobjekt mit der <envar>objectClass</envar>
				<envar>pwdPolicy</envar> angepasst werden:
				<programlisting language="sh">
univention-ldapsearch objectclass=pwdPolicy
				</programlisting>
				Das Attribut <envar>pwdMaxFailure</envar> bestimmt die Anzahl der LDAP-Authentifizierungsfehler vor der Sperrung.
				Das Attribut <envar>pwdMaxFailureCountInterval</envar> bestimmt das Zeitintervall in Sekunden, das berücksichtigt wird.
				LDAP-Authentifizierungsfehler außerhalb dieses Intervalls werden bei der Zählung vernachlässigt.
			</para>
			<para>
				Um den Account erst nach 10 Versuchen zu sperren kann der folgende Befehl verwendet werden:
				<programlisting language="sh">
ldapmodify -x -D cn=admin,$(ucr get ldap/base) -y /etc/ldap.secret &lt;&lt;__EOT__
dn: cn=default,cn=ppolicy,cn=univention,$(ucr get ldap/base)
changetype: modify
replace: pwdMaxFailure
pwdMaxFailure: 10
__EOT__
				</programlisting>
			</para>
			<para>
				Die manuelle Entsperrung eines Benutzers erfolgt in der Benutzerverwaltung auf dem Reiter <guimenu>Konto</guimenu>
				über die Aktivierung der Checkbox <guimenu>Aussperrung zurücksetzen</guimenu>.
			</para>
		</section>
    </section>
    <section id="users:templates">
        <title>Benutzervorlagen</title>
        <para>
            Mit einer Benutzervorlage können beim Anlegen eines Benutzers Einstellungen
            vorgegeben werden.
            Ist mindestens eine Benutzervorlage definiert, kann sie beim Anlegen eines
            Benutzer ausgewählt werden.
        </para>
        <figure id="user-create-template">
            <title>Auswahl einer Benutzervorlage</title>
            <graphic scalefit="1" width="70%" align="center" fileref="illustrations44/users_usertemplate_de.png"/>
        </figure>
        <para>
            Benutzervorlagen werden im UMC-Modul <guimenu>LDAP-Verzeichnis</guimenu>
            verwaltet. Dort muss in den Container <uri>univention</uri> und dort in den
            Untercontainer <uri>templates</uri> gewechselt werden. Hier kann
            über <guimenu>Hinzufügen</guimenu> mit dem
            Objekt-Typ <guimenu>Einstellungen: Benutzervorlage</guimenu> eine neue
            Benutzervorlage angelegt werden.
        </para>
        <para>
            In einer Benutzervorlage kann entweder ein fester Wert vorgegeben
            werden (z.B. für die Anschrift) oder ein Attribut der
            Benutzerverwaltung referenziert werden. Attribute werden dabei in
            spitzen Klammern referenziert.
        </para>
        <para>
            Eine Liste möglicher Attribute kann mit dem Befehl:
        </para>
            <programlisting language="sh">
univention-directory-manager users/user
            </programlisting>
        <para>
            im Abschnitt <emphasis>users/user variables</emphasis> der Ausgabe ermittelt werden.
        </para>
        <para>
            Wird beim Hinzufügen eines Benutzers eine Benutzervorlage verwendet,
            überschreibt diese alle in der Vorlage vorkommenden Felder mit dem
            in der Vorlage gesetzten Wert. Dabei gilt ein leeres Feld
            ebenfalls als auf "" gesetzt.
        </para>
        <para>
            Es können auch nur Teilwerte von Attributen übernommen werden und
            Werte in Groß-/Kleinschreibung konvertiert werden:
		</para>

        <para>
		  So kann beispielsweise das UNIX-Heimatverzeichnis unter
		  <filename class="directory">/home/&lt;title&gt;.&lt;lastname&gt;</filename> angelegt werden oder die primäre
		  E-Mail-Adresse mit <userinput>&lt;firstname&gt;.&lt;lastname&gt;@firma.com</userinput>
		  vordefiniert werden. Ersetzungen sind grundsätzlich für beliebige Werte möglich, eine
		  syntaktische oder semantische Überprüfung erfolgt jedoch nicht. Wird beispielsweise beim
		  Anlegen des Benutzers kein Vorname angegeben, würde die obige E-Mail-Adresse mit einem
		  Punkt beginnen und wäre somit nach dem E-Mail-Standard ungültig. Ähnliche Fehlerquellen
		  können auch im Umgang mit Dateipfaden etc. auftreten.
		  Nicht auflösbare Attribute (etwa durch Tippfehler in der Vorlage) werden gelöscht.
		</para>

        <para>
		  Wird nicht der komplette Attributwert, sondern nur ein einzelnes Zeichen des Attributs
		  benötigt, kann in der Benutzervorlage nach dem Attributnamen der Index des benötigten
		  Zeichens in eckigen Klammern angegeben werden. Die Zählung der Zeichen des Attributs
		  beginnt bei 0, so dass z.B. der Index 1 dem zweiten Zeichen des Attributwertes
		  entspricht. Mit <userinput>&lt;firstname&gt;[0].&lt;lastname&gt;@firma.com</userinput> wird
		  beispielsweise eine E-Mail-Adresse aus dem ersten Buchstaben des Vornamens sowie dem
		  Nachnamen gebildet.
		</para>

        <para>
		  Eine Teilzeichenkette des Attributwerts kann über die Angabe eines Bereichs in eckigen
		  Klammern erreicht werden. Dabei ist der Index des ersten benötigten Zeichens sowie der
		  Index des letzten benötigten Zeichens plus 1 anzugeben. Die Angabe
		  <userinput>&lt;firstname&gt;[2:5]</userinput> gibt z.B. das dritte bis fünfte Zeichen des
		  Vornamens zurück.
		</para>

        <para>
		  Das Anhängen von <literal>:lower</literal> oder <literal>:upper</literal> an den
		  Attributnamen führt dazu, dass der Attributwert in Klein- oder Großschreibung
		  umgewandelt wird, z.B. <userinput>&lt;firstname:lower&gt;</userinput>. Wird ein
		  Modifikator wie <literal>:lower</literal> an das Ende des Feldes angehängt, wird
		  der komplette Wert umgewandelt, z.B. <userinput>&lt;lastname&gt;@company.com&lt;:lower&gt;</userinput>.
		</para>

        <para>
		  Durch die Option <literal>:umlauts</literal> werden Sonderzeichen wie è,
		  ä oder ß in entsprechende ASCII-Zeichen umgewandelt.
		</para>

		<para>
		Durch die Option <literal>:alphanum</literal> werden alle nicht alphanumerischen Zeichen, wie ` oder # entfernt.
		In der UCR Variable <envar>directory/manager/templates/alphanum/whitelist</envar> können Zeichen definiert werden, die von dieser Option ignoriert werden.
		Zu beachten ist, dass wenn diese Option auf das ganze Feld angewendet wird, auch manuell gesetzte Zeichen entfernt werden. Zum Beispiel
		das @-Zeichen in der Email-Adresse. Daher sollte man diese Option nur auf einzelne Attribute anwenden oder die Whitelist anpassen.
		</para>

        <para>
		  Die Optionen <literal>:strip</literal> bzw. <literal>:trim</literal> entfernen alle Leerzeichen am Anfang und Ende der Zeichenkette.
		</para>

        <para>
		  Optionen können auch kombiniert werden, z.B: <literal>:umlauts,upper</literal>.
		</para>

    </section>
</chapter>
